<?xml version="1.0"?>

<project name="Get SWT" default="get-swt" basedir=".">
<!-- ================================================================================== -->
<!-- This script will refresh this project with code from a particular version of SWT.  -->
<!-- ================================================================================== -->

<property name="swt.version" value="v3124"/>
<property name="swtDir" value="org.eclipse.swt"/>
<property name="tmpDir" value="tmp"/>
<property name="commonSwtDir" value="SWT-common"/>
<property name="commonSwtJ2meDir" value="SWT-common-j2me"/>
<property name="commonSwtJ2seDir" value="SWT-common-j2se"/>
<property name="swtBaseDir" value="${swtDir}/Eclipse SWT/common/org/eclipse/swt"/>
<property name="swtEventsDir" value="${swtDir}/Eclipse SWT/common/org/eclipse/swt/events"/>
<property name="swtInternalDir" value="${swtDir}/Eclipse SWT/common/org/eclipse/swt/internal"/>
<property name="swtLayoutDir" value="${swtDir}/Eclipse SWT/common/org/eclipse/swt/layout"/>
<property name="swtImageDir" value="${swtDir}/Eclipse SWT/common/org/eclipse/swt/internal/image"/>
<property name="swtGraphicsDir" value="${swtDir}/Eclipse SWT/common/org/eclipse/swt/graphics"/>
<property name="swtWidgetsDir" value="${swtDir}/Eclipse SWT/common/org/eclipse/swt/widgets"/>
<property name="swtLibraryDir" value="${swtDir}/Eclipse SWT/common/library"/>
<property name="swtMessages" value="org/eclipse/swt/internal/SWTMessages.properties"/>
<property name="swtCommonDir" value="Eclipse SWT/common"/>
<property name="swtCommonJ2meDir" value="Eclipse SWT/common_j2me"/>
<property name="swtCommonPIJ2meDir" value="Eclipse SWT PI/common_j2me"/>
<property name="swtCommonJ2seDir" value="Eclipse SWT/common_j2se"/>
<property name="swtCommonPIJ2seDir" value="Eclipse SWT PI/common_j2se"/>

<target name="get-swt">
	<antcall target="get"/> 
	<antcall target="delete-folders"/> 
	<antcall target="delete-files"/> 
	<antcall target="delete-cvs"/> 
	<antcall target="move-cvs"/> 
</target>

<!-- Get the SWT Projects from CVS -->
<target name="get">	
	<delete dir="${tmpDir}"/>
	<delete dir="${commonSwtJ2meDir}"/>
	<delete dir="${commonSwtJ2seDir}"/>
	<mkdir dir="${tmpDir}"/>
	<exec executable="cvs" dir="${tmpDir}" > <arg line="-q -d :pserver:anonymous@dev.eclipse.org:/home/eclipse checkout -r ${swt.version} ${swtDir}"/> </exec>
</target>

<target name="delete-folders">	
  	<copy file="${tmpDir}/${swtDir}/${swtCommonJ2seDir}/${swtMessages}" tofile="${tmpDir}/${swtDir}/${swtCommonJ2seDir}/${swtMessages}"/>

	<delete includeEmptyDirs="true">
		<fileset dir="${tmpDir}" defaultexcludes="no">
			<include name ="${swtImageDir}/**"/>
    	</fileset> 
	</delete>

	<delete includeEmptyDirs="true">
		<fileset dir="${tmpDir}/${swtDir}" defaultexcludes="no">
			<exclude name ="${swtCommonDir}/**"/>
			<exclude name ="${swtCommonJ2meDir}/**"/>
			<exclude name ="${swtCommonPIJ2meDir}/**"/>
			<exclude name ="${swtCommonJ2seDir}/**"/>
			<exclude name ="${swtCommonPIJ2seDir}/**"/>
    	</fileset> 
	</delete>
	<delete dir="${tmpDir}/${swtLibraryDir}"/>
</target>

<target name="delete-files">

	<!-- Remove unneeded internal classes -->
	<delete dir="${tmpDir}/${swtInternalDir}"/>
	<delete file="${tmpDir}/${swtDir}/${swtCommonPIJ2seDir}/org/eclipse/swt/internal/Library.java"/>
	<delete file="${tmpDir}/${swtDir}/${swtCommonPIJ2meDir}/org/eclipse/swt/internal/Library.java"/>
	<!-- Remove Layout classes except for FormLayout -->
	<delete file="${tmpDir}/${swtLayoutDir}/FillLayout.java"/>	 
	<delete file="${tmpDir}/${swtLayoutDir}/GridLayout.java"/>
	<delete file="${tmpDir}/${swtLayoutDir}/GridData.java"/>
	<delete file="${tmpDir}/${swtLayoutDir}/RowLayout.java"/>
	<delete file="${tmpDir}/${swtLayoutDir}/RowData.java"/>
	<!-- Remove unused listeners/events -->
	<delete file="${tmpDir}/${swtEventsDir}/ArmEvent.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/ArmListener.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/HelpEvent.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/HelpListener.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/MouseTrackListener.java"/>
	<!-- Remove Adapters -->
	<delete file="${tmpDir}/${swtEventsDir}/ControlAdapter.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/FocusAdapter.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/KeyAdapter.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/MenuAdapter.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/MouseAdapter.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/MouseTrackAdapter.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/SelectionAdapter.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/ShellAdapter.java"/>
	<delete file="${tmpDir}/${swtEventsDir}/TreeAdapter.java"/>
	<!-- Remove ImageLoader -->
	<delete file="${tmpDir}/${swtGraphicsDir}/ImageLoader.java"/>
	<delete file="${tmpDir}/${swtGraphicsDir}/ImageLoaderEvent.java"/>
	<delete file="${tmpDir}/${swtGraphicsDir}/ImageLoaderListener.java"/>
	<!-- Remove ImageData -->	
	<delete file="${tmpDir}/${swtGraphicsDir}/ImageData.java"/>
	<!-- Remove unnecessary graphics classes -->
	<delete file="${tmpDir}/${swtGraphicsDir}/TextStyle.java"/>
	<delete file="${tmpDir}/${swtGraphicsDir}/Drawable.java"/>
	<!-- Remove Tray and Monitor -->
	<delete file="${tmpDir}/${swtWidgetsDir}/Tray.java"/>
	<delete file="${tmpDir}/${swtWidgetsDir}/Monitor.java"/>
	<!-- Remove Classes we've modified.  We don't want to overwrite these. -->
	<delete file="${tmpDir}/${swtBaseDir}/SWT.java"/>
	<delete file="${tmpDir}/${swtWidgetsDir}/TypedListener.java"/>
</target>

<target name="delete-cvs">	
	<delete includeEmptyDirs="true">
		<fileset dir="${tmpDir}" defaultexcludes="no">
			<include name="**/CVS/**"/>
    	</fileset> 
	</delete>
</target>

<target name="move-cvs">	
  	<copy todir="${basedir}/${commonSwtDir}">
    	<fileset dir="${tmpDir}/${swtDir}/${swtCommonDir}"/>
  	</copy>
  	<copy todir="${basedir}/${commonSwtJ2meDir}">
    	<fileset dir="${tmpDir}/${swtDir}/${swtCommonJ2meDir}"/>
  	</copy>
  	<copy todir="${basedir}/${commonSwtJ2meDir}">
    	<fileset dir="${tmpDir}/${swtDir}/${swtCommonPIJ2meDir}"/>
  	</copy>
  	<copy todir="${basedir}/${commonSwtJ2seDir}">
    	<fileset dir="${tmpDir}/${swtDir}/${swtCommonJ2seDir}"/>
  	</copy>
  	<copy todir="${basedir}/${commonSwtJ2seDir}">
    	<fileset dir="${tmpDir}/${swtDir}/${swtCommonPIJ2seDir}"/>
  	</copy>
	<delete dir="${tmpDir}"/>
</target>

</project>